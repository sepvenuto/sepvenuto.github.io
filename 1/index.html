<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project 1: Images of the Russian Empire</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Project 1: Images of the Russian Empire</h1>
            <p class="subtitle">Colorizing the Prokudin-Gorskii photo collection</p>
            <p class="subtitle">Due: September 12, 2025 • CS180</p>
        </header>
        
        <div style="padding: 20px;">
            <a href="../index.html">← Back to Portfolio</a>
        </div>

        <main>
            <!-- Overview Section -->
            <div class="project-content">
                <h2>Overview</h2>
                <div class="project-content-body">
                    <p>This project involved taking digitized Prokudin-Gorskii glass plate images and automatically producing color images by extracting three color channels (Blue, Green, Red) and aligning them to form a single RGB color image. The main challenge was developing an efficient alignment algorithm that could handle both small JPEG files and large TIFF files.</p>

                    <h3>Approach</h3>
                    <p><strong>Single-Scale Implementation:</strong> For the simple alignment, my approach is to follow a moving window. First, I remove 50 pixels from all sides of the image to remove the border. I treat the base slide as being anchored in place, and create a window that is centered at (0,0), or the top right corner of the base slide. From there, I have the moving slide align itself with each coordinate within the window, then crop both slides to just include the part that overlaps between the offset moving slide and the stationary base slide. For each set of cropped slides, I compute the NCC, and return the offset (referring to the difference in coordinates between the top right corner of the base slide and the top right corner of the moving slide) that corresponds to the highest NCC. 

Originally, I was trying to both roll and crop my images, which was causing issues where I was moving the images too many times and actually harming the final result. It really helped to create a dummy problem which was just an np array with a singular white square in the middle, and getting to see how my approach responded. 
</p>
                    
                    <p><strong>Multi-Scale Pyramid:</strong> For the pyramid alignment, I called the simple alignment multiple times, with different resolutions of the image. For each level (starting from the lowest resolution/highest level), I shrunk the resolution of the image by a factor of 0.5**level. I then removed 50 pixels from each side of the image to remove the border. Then, I created the window, but instead of centering the window at (0,0), I instead centered the window at the previous best offset that I had found, scaled to match the level. Then, I ran an exhaustive search with this window to get the best offset for this level. I then scale that offset in a reverse manner back to the size of the original image, and then continue on to the next level.
</p>
                </div>
            </div>

            <!-- Results Section -->
            <div class="project-content">
                <h2>Results on Example Images</h2>
                <div class="project-content-body">
                    <p>Below are the results of my alignment algorithm on the provided example images. The displacement vectors show the (x,y) offsets used to align the Green and Red channels to the Blue channel.</p>

                    <!-- Low-res JPEG Images -->
                    <h3>Low-Resolution Images (.jpg)</h3>
                    
                    <h4>monastery.jpg</h4>
                    <div class="image-gallery">
                        <div class="image-container">
                            <img src="./aligned_images/monastery.jpg" alt="Aligned monastery image">
                            <div class="image-caption">
                                Aligned Result<br>
                                Green offset: (2, -3)<br>
                                Red offset: (2, 3)
                            </div>
                        </div>
                    </div>

                    <h4>tobolsk.jpg</h4>
                    <div class="image-gallery">
                        <div class="image-container">
                            <img src="./aligned_images/tobolsk.jpg" alt="Aligned tobolsk image">
                            <div class="image-caption">
                                Aligned Result<br>
                                Green offset: (3, 3)<br>
                                Red offset: (3, 6)
                            </div>
                        </div>
                    </div>

                    <h4>cathedral.jpg</h4>
                    <div class="image-gallery">
                        <div class="image-container">
                            <img src="./aligned_images/cathedral.jpg" alt="Aligned cathedral image">
                            <div class="image-caption">
                                Aligned Result<br>
                                Green offset: (2, 5)<br>
                                Red offset: (3, 12)
                            </div>
                        </div>
                    </div>

                    <!-- High-res TIFF Images -->
                    <h3>High-Resolution Images (.tif)</h3>
                    
                    <h4>emir.tif</h4>
                    <div class="image-gallery">
                        <div class="image-container">
                            <img src="./aligned_images/emir.jpg" alt="Aligned emir image">
                            <div class="image-caption">
                                Aligned Result<br>
                                Green offset: (8, 46)<br>
                                Red offset: (17, 102)
                            </div>
                        </div>
                    </div>

                    <h4>harvesters.tif</h4>
                    <div class="image-gallery">
                        <div class="image-container">
                            <img src="./aligned_images/harvesters.jpg" alt="Aligned harvesters image">
                            <div class="image-caption">
                                Aligned Result<br>
                                Green offset: [your values]<br>
                                Red offset: [your values]
                            </div>
                        </div>
                    </div>

                    <h4>icon.tif</h4>
                    <div class="image-gallery">
                        <div class="image-container">
                            <img src="./aligned_images/icon.jpg" alt="Aligned icon image">
                            <div class="image-caption">
                                Aligned Result<br>
                                Green offset: [your values]<br>
                                Red offset: [your values]
                            </div>
                        </div>
                    </div>

                    <h4>lady.tif</h4>
                    <div class="image-gallery">
                        <div class="image-container">
                            <img src="./aligned_images/lady.jpg" alt="Aligned lady image">
                            <div class="image-caption">
                                Aligned Result<br>
                                Green offset: [your values]<br>
                                Red offset: [your values]
                            </div>
                        </div>
                    </div>

                    <h4>melons.tif</h4>
                    <div class="image-gallery">
                        <div class="image-container">
                            <img src="./aligned_images/melons.jpg" alt="Aligned melons image">
                            <div class="image-caption">
                                Aligned Result<br>
                                Green offset: [your values]<br>
                                Red offset: [your values]
                            </div>
                        </div>
                    </div>

                    <h4>onion_church.tif</h4>
                    <div class="image-gallery">
                        <div class="image-container">
                            <img src="./aligned_images/onion_church.jpg" alt="Aligned onion church image">
                            <div class="image-caption">
                                Aligned Result<br>
                                Green offset: [your values]<br>
                                Red offset: [your values]
                            </div>
                        </div>
                    </div>

                    <h4>sculpture.tif</h4>
                    <div class="image-gallery">
                        <div class="image-container">
                            <img src="./aligned_images/sculpture.jpg" alt="Aligned sculpture image">
                            <div class="image-caption">
                                Aligned Result<br>
                                Green offset: [your values]<br>
                                Red offset: [your values]
                            </div>
                        </div>
                    </div>

                    <h4>self_portrait.tif</h4>
                    <div class="image-gallery">
                        <div class="image-container">
                            <img src="./aligned_images/self_portrait.jpg" alt="Aligned self portrait image">
                            <div class="image-caption">
                                Aligned Result<br>
                                Green offset: [your values]<br>
                                Red offset: [your values]
                            </div>
                        </div>
                    </div>

                    <h4>three_generations.tif</h4>
                    <div class="image-gallery">
                        <div class="image-container">
                            <img src="./aligned_images/three_generations.jpg" alt="Aligned three generations image">
                            <div class="image-caption">
                                Aligned Result<br>
                                Green offset: [your values]<br>
                                Red offset: [your values]
                            </div>
                        </div>
                    </div>

                    <h4>train.tif</h4>
                    <div class="image-gallery">
                        <div class="image-container">
                            <img src="./aligned_images/train.jpg" alt="Aligned train image">
                            <div class="image-caption">
                                Aligned Result<br>
                                Green offset: [your values]<br>
                                Red offset: [your values]
                            </div>
                        </div>
                    </div>

                    <!-- Complete Alignment Results Table -->
                    <h3>Complete Alignment Results</h3>
                    <table style="margin: 20px auto; border-collapse: collapse; border: 1px solid #ddd;">
                        <thead style="background-color: #f2f2f2;">
                            <tr>
                                <th style="border: 1px solid #ddd; padding: 8px;">Image</th>
                                <th style="border: 1px solid #ddd; padding: 8px;">Green Offset (x, y)</th>
                                <th style="border: 1px solid #ddd; padding: 8px;">Red Offset (x, y)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td style="border: 1px solid #ddd; padding: 8px;">monastery.jpg</td><td style="border: 1px solid #ddd; padding: 8px;">(2, -3)</td><td style="border: 1px solid #ddd; padding: 8px;">(2, 3)</td></tr>
                            <tr><td style="border: 1px solid #ddd; padding: 8px;">tobolsk.jpg</td><td style="border: 1px solid #ddd; padding: 8px;">(3, 3)</td><td style="border: 1px solid #ddd; padding: 8px;">(3, 6)</td></tr>
                            <tr><td style="border: 1px solid #ddd; padding: 8px;">cathedral.jpg</td><td style="border: 1px solid #ddd; padding: 8px;">(2, 5)</td><td style="border: 1px solid #ddd; padding: 8px;">(3, 12)</td></tr>
                            <tr><td style="border: 1px solid #ddd; padding: 8px;">emir.tif</td><td style="border: 1px solid #ddd; padding: 8px;">(8, 46)</td><td style="border: 1px solid #ddd; padding: 8px;">(17, 102)</td></tr>
                            <tr><td style="border: 1px solid #ddd; padding: 8px;">[Add remaining results from your CSV]</td><td style="border: 1px solid #ddd; padding: 8px;">[Fill in]</td><td style="border: 1px solid #ddd; padding: 8px;">[Fill in]</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Additional Images Section -->
            <div class="project-content">
                <h2>Additional Images from the Prokudin-Gorskii Collection</h2>
                <div class="project-content-body">
                    <p>I selected a few additional images from the Prokudin-Gorskii collection to test my algorithm on different types of scenes and content.</p>

                    <h3>Image 1: [Your chosen image name]</h3>
                    <div class="image-gallery">
                        <div class="image-container">
                            <img src="./my_images/[your_image1].jpg" alt="My chosen image 1">
                            <div class="image-caption">
                                [Description of what this image shows]<br>
                                Green offset: [your values]<br>
                                Red offset: [your values]
                            </div>
                        </div>
                    </div>
                    <p><strong>Why I chose this image:</strong> [Explain what was interesting about this particular image - was it challenging? Did it have unique features? How did your algorithm perform?]</p>

                    <h3>Image 2: [Your chosen image name]</h3>
                    <div class="image-gallery">
                        <div class="image-container">
                            <img src="./my_images/[your_image2].jpg" alt="My chosen image 2">
                            <div class="image-caption">
                                [Description of what this image shows]<br>
                                Green offset: [your values]<br>
                                Red offset: [your values]
                            </div>
                        </div>
                    </div>
                    <p><strong>Why I chose this image:</strong> [Explain the rationale for selecting this image]</p>

                    <h3>Image 3: [Your chosen image name]</h3>
                    <div class="image-gallery">
                        <div class="image-container">
                            <img src="./my_images/[your_image3].jpg" alt="My chosen image 3">
                            <div class="image-caption">
                                [Description of what this image shows]<br>
                                Green offset: [your values]<br>
                                Red offset: [your values]
                            </div>
                        </div>
                    </div>
                    <p><strong>Why I chose this image:</strong> [Explain what made this image interesting to process]</p>
                </div>
            </div>
        </main>

        <footer>
            <p>&copy; 2025 CS180 Portfolio • Sylvie Venuto • UC Berkeley</p>
        </footer>
    </div>
</body>
</html>
