<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project 3A: Image Warping and Mosaicing</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Project 3A: Image Warping and Mosaicing</h1>
            <p class="subtitle">CS180 • Image Warping and Mosaicing</p>
        </header>
        
        <div style="padding: 20px;">
            <a href="../index.html">← Back to Portfolio</a>
        </div>

        <main>
            <!-- Overview Section -->
            <div class="project-content">
                <h2>Overview</h2>
                <div class="project-content-body">
                    <p>This project explores image warping and mosaicing techniques. I implemented homography computation, image warping with multiple interpolation methods, and blended multiple images together to create seamless panoramic mosaics. The project demonstrates how projective transformations can align images taken from the same camera position but different orientations.</p>
                </div>
            </div>

            <!-- Part A.1: Shoot and Digitize Pictures -->
            <div class="project-content">
                <h2>Part A.1: Shoot and Digitize Pictures</h2>
                <div class="project-content-body">
                    <p>I captured multiple sets of images with projective transformations between them by fixing the center of projection and rotating the camera. The images have 40-70% overlap to facilitate registration.</p>
                    
                   <h3>Image Set 1: Lamppost</h3>
                    <div class="image-gallery">
                        <div class="image-container" style="max-width: 300px; margin: 0 auto;">
                            <img src="./A.1/lamppost_top.jpeg" alt="Lamppost Top">
                            <div class="image-caption">Lamppost Top</div>
                        </div>
                        <div class="image-container" style="max-width: 300px; margin: 0 auto;">
                            <img src="./A.1/lamppost_bottom.jpeg" alt="Lamppost Bottom">
                            <div class="image-caption">Lamppost Bottom</div>
                        </div>
                    </div>
            
                    <h3>Image Set 2: Soda Patio</h3>
                    <div class="image-gallery">
                        <div class="image-container" style="max-width: 300px; margin: 0 auto;">
                            <img src="./A.1/soda_left.jpeg" alt="Soda Patio Left">
                            <div class="image-caption">Soda Patio Left</div>
                        </div>
                        <div class="image-container" style="max-width: 300px; margin: 0 auto;">
                            <img src="./A.1/soda_right.jpeg" alt="Soda Patio Right">
                            <div class="image-caption">Soda Patio Right</div>
                        </div>
                    </div>
            
                    <h3>Image Set 3: Street View</h3>
                    <div class="image-gallery">
                        <div class="image-container" style="max-width: 300px; margin: 0 auto;">
                            <img src="./A.1/street_left.jpeg" alt="Street View Left">
                            <div class="image-caption">Street View Left</div>
                        </div>
                        <div class="image-container" style="max-width: 300px; margin: 0 auto;">
                            <img src="./A.1/street_right.jpeg" alt="Street View Right">
                            <div class="image-caption">Street View Right</div>
                        </div>
                    </div>
            
                    <h3>Image Set 4: Window</h3>
                    <div class="image-gallery">
                        <div class="image-container" style="max-width: 300px; margin: 0 auto;">
                            <img src="./A.1/window_top.jpeg" alt="Window Top">
                            <div class="image-caption">Window Top</div>
                        </div>
                        <div class="image-container" style="max-width: 300px; margin: 0 auto;">
                            <img src="./A.1/window_bottom.jpeg" alt="Window Bottom">
                            <div class="image-caption">Window Bottom</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Part A.2: Recover Homographies -->
            <div class="project-content">
                <h2>Part A.2: Recover Homographies</h2>
                <div class="project-content-body">
                    <h3>Point Correspondences</h3>
                    <p>I manually established point correspondences between image pairs by selecting matching features visible in both images. These correspondences were used to compute the homography matrices.</p>
                    
                    <h4>Soda Patio</h4>
                    <div class="image-gallery">
                        <div class="image-container" style="max-width: 400px; margin: 0 auto;">
                            <img src="./A.2/soda_left_correspondences.png" alt="Soda left correspondences">
                            <div class="image-caption">Soda Left - Point Correspondences</div>
                        </div>
                        <div class="image-container" style="max-width: 400px; margin: 0 auto;">
                            <img src="./A.2/soda_right_correspondences.png" alt="Soda right correspondences">
                            <div class="image-caption">Soda Right - Point Correspondences</div>
                        </div>
                    </div>
            
                    <h4>Street View</h4>
                    <div class="image-gallery">
                        <div class="image-container" style="max-width: 400px; margin: 0 auto;">
                            <img src="./A.2/street_left_correspondences.png" alt="Street left correspondences">
                            <div class="image-caption">Street Left - Point Correspondences</div>
                        </div>
                        <div class="image-container" style="max-width: 400px; margin: 0 auto;">
                            <img src="./A.2/street_right_correspondences.png" alt="Street right correspondences">
                            <div class="image-caption">Street Right - Point Correspondences</div>
                        </div>
                    </div>
            
                    <h4>Lamppost</h4>
                    <div class="image-gallery">
                        <div class="image-container" style="max-width: 400px; margin: 0 auto;">
                            <img src="./A.2/lamppost_top_correspondences.png" alt="Lamppost top correspondences">
                            <div class="image-caption">Lamppost Top - Point Correspondences</div>
                        </div>
                        <div class="image-container" style="max-width: 400px; margin: 0 auto;">
                            <img src="./A.2/lamppost_bottom_correspondences.png" alt="Lamppost bottom correspondences">
                            <div class="image-caption">Lamppost Bottom - Point Correspondences</div>
                        </div>
                    </div>
            
                    <h4>Window</h4>
                    <div class="image-gallery">
                        <div class="image-container" style="max-width: 400px; margin: 0 auto;">
                            <img src="./A.2/window_top_correspondences.png" alt="Window top correspondences">
                            <div class="image-caption">Window Top - Point Correspondences</div>
                        </div>
                        <div class="image-container" style="max-width: 400px; margin: 0 auto;">
                            <img src="./A.2/window_bottom_correspondences.png" alt="Window bottom correspondences">
                            <div class="image-caption">Window Bottom - Point Correspondences</div>
                        </div>
                    </div>
            
                    <h3>Recovered Homography Matrices</h3>
                    <p><strong>Soda Patio:</strong></p>
                    <pre><code>
            H = [[ 1.35064696e+00, -6.23925804e-02, -3.77444122e+02],
                 [ 3.27778363e-01,  1.22122900e+00, -1.66985651e+02],
                 [ 3.62976600e-04,  2.10998333e-05,  1.00000000e+00]]
                    </code></pre>
            
                    <p><strong>Street View:</strong></p>
                    <pre><code>
            H = [[ 1.89035443e+00, -4.14374296e-02, -8.94674375e+02],
                 [ 3.48853758e-01,  1.55862545e+00, -2.63932350e+02],
                 [ 7.10015939e-04, -5.18404149e-05,  1.00000000e+00]]
                    </code></pre>
            
                    <p><strong>Lamppost:</strong></p>
                    <pre><code>
            H = [[ 1.95711262e+00,  5.18822017e-01, -4.93444794e+02],
                 [-4.50896642e-02,  2.35600860e+00, -1.28429828e+03],
                 [ 3.16527272e-05,  1.02943939e-03,  1.00000000e+00]]
                    </code></pre>
            
                    <p><strong>Window:</strong></p>
                    <pre><code>
            H = [[ 1.65580294e+00,  4.39168291e-01, -2.87009207e+02],
                 [-3.43960721e-02,  2.06082643e+00, -1.09533535e+03],
                 [-1.06980663e-04,  8.60263728e-04,  1.00000000e+00]]
                    </code></pre>
            </div>

            <!-- Part A.3: Warp the Images -->
            <div class="project-content">
                <h2>Part A.3: Warp the Images</h2>
                <div class="project-content-body">
                    <h3>Image Rectification</h3>
                    <p>I tested my homography and warping implementation by rectifying images containing rectangular objects.</p>
                    
                    <h4>Rectification Example 1: Poster</h4>
                    <div class="image-gallery">
                        <div class="image-container" style="max-width: 350px; margin: 0 auto;">
                            <img src="./A.3/poster.jpeg" alt="Original tilted image">
                            <div class="image-caption">Original Image</div>
                        </div>
                        <div class="image-container" style="max-width: 350px; margin: 0 auto;">
                            <img src="./A.3/rectified_poster_nearest_neightbor.png" alt="Rectified with nearest neighbor">
                            <div class="image-caption">Nearest Neighbor Interpolation</div>
                        </div>
                        <div class="image-container" style="max-width: 350px; margin: 0 auto;">
                            <img src="./A.3/rectified_poster_bilinear.png" alt="Rectified with bilinear">
                            <div class="image-caption">Bilinear Interpolation</div>
                        </div>
                    </div>

                    <h4>Rectification Example 2: wall decoration</h4>
                    <div class="image-gallery">
                        <div class="image-container" style="max-width: 350px; margin: 0 auto;">
                            <img src="./A.3/shrine.jpeg" alt="Original tilted image">
                            <div class="image-caption">Original Image</div>
                        </div>
                        <div class="image-container" style="max-width: 350px; margin: 0 auto;">
                            <img src="./A.3/rectified_shrine_nearest_neightbor.png" alt="Rectified with nearest neighbor">
                            <div class="image-caption">Nearest Neighbor Interpolation</div>
                        </div>
                        <div class="image-container" style="max-width: 350px; margin: 0 auto;">
                            <img src="./A.3/rectified_shrine_bilinear.png" alt="Rectified with bilinear">
                            <div class="image-caption">Bilinear Interpolation</div>
                        </div>
                    </div>

                    <h3>Interpolation Comparison</h3>
                    <p><strong>Quality:</strong> The quality of the resulting image is better with bilinear interpolation than with the nearest neighbor approach. This is because the nearest neighbor approach tries to map partial pixels to the nearest full pixel, meaning that we lose the nuance and detail that may have been spread across pixels. For example, it is possible that some pixels in the original are never corresponding to a rounded pixel in the new version, meaning that that pixel value is completely lost. However, with the bilinear, the pixels will still contribute to the result, even if their weight is not 100%.</p>
                    <p><strong>Speed:</strong> The nearest neighbor approach is quicker (7.0736 seconds instead of 7.3857 seconds after computing the homography). This is due to the simpler logic required of just rounding instead of checking more conditions. However, this is not a significant difference in time for the smaller imagegs that are lower quality and when we are only processing one image. If we have to process more images on a larger scale, we would have to take this difference into account more, as it would be compounded.</p>
                </div>
            </div>

            <!-- Part A.4: Blend the Images into a Mosaic -->
            <div class="project-content">
                <h2>Part A.4: Blend the Images into a Mosaic</h2>
                <div class="project-content-body">
                    <h3>Blending Procedure</h3>
                    <p>My blending approach involves an alpha channel and laplacian pyramid. For each image, I create an alpha channel, which is the same dimensions as the output result, and has value 1 where the pixels are filled in using values from the original, and 0 everywhere else. I then use distance_transform_edt (the scipy version of bwdist) to create a dropoff on the weighting, where the closer to the center of the original image, the more it is weighted. I then determine the location of the overlap region (where both alpha channels equal one). For that area, I normalize the weight, so that the overall weight is equal to 1 for each pixel across the two images. I do this by dividing the weight of each image by the overall weight in that region. Where the total distance is 0, such as at the edge of both of the images, I will weight them evenly, with 0.5 each. I then get a laplacian stack. For the lower frequencies, I will weight the level from the laplacian stack by the alpha channel that I just created. For the highest frequency, I create a binary alpha channel, where the channel is 1 if the values in the channel were greater than 0, and 0 otherwise. This allows for the edges to be more clearly maintained, while the colors in the lower frequencies can be better blended more smoothly. I then collapse the modified and weighted laplacian. </p>

                    <h3>Mosaic 1: [Description]</h3>
                    <div class="image-gallery">
                        <div class="image-container" style="max-width: 250px; margin: 0 auto;">
                            <img src="./images/mosaic1_src1.jpg" alt="Mosaic 1 source 1">
                            <div class="image-caption">Source Image 1</div>
                        </div>
                        <div class="image-container" style="max-width: 250px; margin: 0 auto;">
                            <img src="./images/mosaic1_src2.jpg" alt="Mosaic 1 source 2">
                            <div class="image-caption">Source Image 2</div>
                        </div>
                        <div class="image-container" style="max-width: 250px; margin: 0 auto;">
                            <img src="./images/mosaic1_src3.jpg" alt="Mosaic 1 source 3">
                            <div class="image-caption">Source Image 3</div>
                        </div>
                    </div>
                    <div class="image-gallery">
                        <div class="image-container" style="max-width: 600px; margin: 0 auto;">
                            <img src="./images/mosaic1_result.jpg" alt="Mosaic 1 result">
                            <div class="image-caption">Final Mosaic 1</div>
                        </div>
                    </div>

                    <h3>Mosaic 2: [Description]</h3>
                    <div class="image-gallery">
                        <div class="image-container" style="max-width: 250px; margin: 0 auto;">
                            <img src="./images/mosaic2_src1.jpg" alt="Mosaic 2 source 1">
                            <div class="image-caption">Source Image 1</div>
                        </div>
                        <div class="image-container" style="max-width: 250px; margin: 0 auto;">
                            <img src="./images/mosaic2_src2.jpg" alt="Mosaic 2 source 2">
                            <div class="image-caption">Source Image 2</div>
                        </div>
                        <div class="image-container" style="max-width: 250px; margin: 0 auto;">
                            <img src="./images/mosaic2_src3.jpg" alt="Mosaic 2 source 3">
                            <div class="image-caption">Source Image 3</div>
                        </div>
                    </div>
                    <div class="image-gallery">
                        <div class="image-container" style="max-width: 600px; margin: 0 auto;">
                            <img src="./images/mosaic2_result.jpg" alt="Mosaic 2 result">
                            <div class="image-caption">Final Mosaic 2</div>
                        </div>
                    </div>

                    <h3>Mosaic 3: [Description]</h3>
                    <div class="image-gallery">
                        <div class="image-container" style="max-width: 250px; margin: 0 auto;">
                            <img src="./images/mosaic3_src1.jpg" alt="Mosaic 3 source 1">
                            <div class="image-caption">Source Image 1</div>
                        </div>
                        <div class="image-container" style="max-width: 250px; margin: 0 auto;">
                            <img src="./images/mosaic3_src2.jpg" alt="Mosaic 3 source 2">
                            <div class="image-caption">Source Image 2</div>
                        </div>
                        <div class="image-container" style="max-width: 250px; margin: 0 auto;">
                            <img src="./images/mosaic3_src3.jpg" alt="Mosaic 3 source 3">
                            <div class="image-caption">Source Image 3</div>
                        </div>
                    </div>
                    <div class="image-gallery">
                        <div class="image-container" style="max-width: 600px; margin: 0 auto;">
                            <img src="./images/mosaic3_result.jpg" alt="Mosaic 3 result">
                            <div class="image-caption">Final Mosaic 3</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>&copy; 2025 CS180 Portfolio • Sylvie Venuto • UC Berkeley</p>
        </footer>
    </div>
</body>
</html>
